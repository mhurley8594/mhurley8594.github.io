(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,t,a){e.exports=a(405)},405:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(123),o=a.n(c),l=a(21),i=a(22),s=a(24),u=a(23),m=a(25),d=a(407),b=a(409),f=a(408),h=a(4);function p(e){return r.a.createElement("div",null,r.a.createElement("h6",null,e.label),r.a.createElement("h4",null,e.count))}function g(e){return r.a.createElement("div",{className:"container text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(p,{label:"kCal",count:e.logs.reduce(function(e,t){return e+t.kcal},0).toFixed(2)}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(p,{label:"Protein",count:e.logs.reduce(function(e,t){return e+t.protein},0).toFixed(2)})),r.a.createElement("div",{className:"col"},r.a.createElement(p,{label:"Fat",count:e.logs.reduce(function(e,t){return e+t.fat},0).toFixed(2)})),r.a.createElement("div",{className:"col"},r.a.createElement(p,{label:"Carb",count:e.logs.reduce(function(e,t){return e+t.carb},0).toFixed(2)}))))}function v(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Food"),r.a.createElement("th",null,"Grams"),r.a.createElement("th",null,"kCal"),r.a.createElement("th",null,"Protein"),r.a.createElement("th",null,"Fat"),r.a.createElement("th",null,"Carb"))),r.a.createElement("tbody",null,e.logs.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{style:{wordBreak:"break-all"}},e.food),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.kcal.toFixed(2)),r.a.createElement("td",null,e.protein.toFixed(2)),r.a.createElement("td",null,e.fat.toFixed(2)),r.a.createElement("td",null,e.carb.toFixed(2)))})))))}var E=a(38),y=a(51),O=a(16),j=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(s.a)(this,Object(u.a)(t).call(this,e));var n=(new Date).toISOString().substr(0,10);return a.state={date:n},a.onDateChange=a.onDateChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onDateChange",value:function(e){this.setState({date:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.logList,a=r.a.createElement("div",null),n=r.a.createElement("div",null);if(t){var c=t.reduce(function(t,a){return a.date===e.state.date&&t.push(a),t},[]);a=r.a.createElement(v,{logs:c}),n=r.a.createElement(g,{logs:c})}return r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"text-center"},"Day Totals"),n,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Date:"),r.a.createElement("input",{type:"date",id:"date",className:"form-control",defaultValue:this.state.date,onChange:this.onDateChange})),a)}}]),t}(n.Component);var k=Object(O.d)(Object(E.b)(function(e){return{logList:e.firestore.ordered.logs}}),Object(y.firestoreConnect)([{collection:"logs"}]))(j),N=a(198),C=a(406),F=a(199),D=a.n(F),S="OR1fFxCjbxhOg23jsmClJFrwjzATy596EbjAjtKR",x=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){var t=Object(h.a)(Object(h.a)(a)),n="quantity"===e.target.id;t.setState(Object(N.a)({},e.target.id,e.target.value),function(){n&&0!==Object.keys(t.state.foodMacros).length&&t.calculateTotals()})},a.onAutocompleteChange=function(e){a.setState({foodName:e.target.value}),a.retrieveDataAsynchronously(e.target.value)},a.onSubmit=function(e){e.preventDefault(),a.props.addLog({date:a.state.date,food:a.state.foodName,quantity:a.state.quantity,kcal:a.state.kcal,protein:a.state.protein,carb:a.state.carb,fat:a.state.fat}),a.props.history.push("/")};var n=(new Date).toISOString().substr(0,10);return a.state={date:n,foodName:"",foodMacros:{},autocompleteData:[],quantity:100,kcal:0,protein:0,carb:0,fat:0},a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.onAutocompleteChange=a.onAutocompleteChange.bind(Object(h.a)(Object(h.a)(a))),a.onSubmit=a.onSubmit.bind(Object(h.a)(Object(h.a)(a))),a.onSelect=a.onSelect.bind(Object(h.a)(Object(h.a)(a))),a.getItemValue=a.getItemValue.bind(Object(h.a)(Object(h.a)(a))),a.renderItem=a.renderItem.bind(Object(h.a)(Object(h.a)(a))),a.retrieveDataAsynchronously=a.retrieveDataAsynchronously.bind(Object(h.a)(Object(h.a)(a))),a.calculateTotals=a.calculateTotals.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"retrieveDataAsynchronously",value:function(e){var t=this,a="https://api.nal.usda.gov/ndb/search/?format=json&q=".concat(encodeURI(e),"&max=25&offset=0&api_key=").concat(S);fetch(a).then(function(e){return e.json()}).then(function(e){void 0!==e.list&&t.setState({autocompleteData:e.list.item})})}},{key:"onSelect",value:function(e){var t=this;fetch("https://api.nal.usda.gov/ndb/V2/reports?ndbno=".concat(e,"&type=f&format=json&api_key=").concat(S)).then(function(e){return e.json()}).then(function(e){var a=e.foods[0].food.nutrients.reduce(function(e,t){return"Energy"===t.name&&"kcal"===t.unit&&(e.kcal=Number(t.value)),"Protein"===t.name&&(e.protein=Number(t.value)),"Total lipid (fat)"===t.name&&(e.fat=Number(t.value)),"Carbohydrate, by difference"===t.name&&(e.carb=Number(t.value)),e},{});t.setState({foodName:e.foods[0].food.desc.name,foodMacros:a},function(){t.calculateTotals()})})}},{key:"renderItem",value:function(e){return r.a.createElement("div",{key:e.ndbno,className:"list-group-item"},e.name)}},{key:"getItemValue",value:function(e){return e.ndbno}},{key:"calculateTotals",value:function(){var e=this.state.quantity/100,t=this.state.foodMacros;this.setState({kcal:e*t.kcal,protein:e*t.protein,carb:e*t.carb,fat:e*t.fat})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"text-center"},"New Log"),r.a.createElement(g,{logs:[{kcal:this.state.kcal,protein:this.state.protein,carb:this.state.carb,fat:this.state.fat}]}),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("label",{htmlFor:"food"},"Food:"),r.a.createElement(D.a,{id:"food",getItemValue:this.getItemValue,items:this.state.autocompleteData,renderItem:this.renderItem,value:this.state.foodName,onChange:this.onAutocompleteChange,onSelect:this.onSelect,wrapperProps:{className:"form-group",style:{}},inputProps:{className:"form-control",placeholder:"Search for food"}}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Date:"),r.a.createElement("input",{type:"date",id:"date",className:"form-control",value:this.state.date,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity"},"Grams:"),r.a.createElement("input",{id:"quantity",name:"quantity",type:"number",className:"form-control",defaultValue:100,onChange:this.onChange})),r.a.createElement("input",{type:"hidden",name:"kcal",id:"kcal",value:this.state.kcal}),r.a.createElement("input",{type:"hidden",name:"protein",id:"protein",value:this.state.protein}),r.a.createElement("input",{type:"hidden",name:"carb",id:"carb",value:this.state.carb}),r.a.createElement("input",{type:"hidden",name:"fat",id:"fat",value:this.state.fat}),r.a.createElement("button",{className:"btn btn-secondary"},"Add Log"),r.a.createElement(C.a,{to:"/",className:"btn"},"Cancel")))}}]),t}(n.Component),w=Object(E.b)(null,function(e){return{addLog:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("logs").add({date:e.date,food:e.food,quantity:e.quantity,kcal:e.kcal,protein:e.protein,carb:e.carb,fat:e.fat}).then(function(){t({type:"ADD_LOG",log:e})}).catch(function(e){t({type:"ADD_LOG_ERROR",err:e})})}}(t))}}})(x),A=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg sticky-top navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement(C.a,{to:"/",className:"navbar-brand"},"Nutrient Log"),r.a.createElement("div",{className:"navbar-nav text-right"},r.a.createElement("div",{className:"nav-item"},r.a.createElement(C.a,{to:"/add",className:"btn btn-secondary btn-sm"},"Add Log")))))}}]),t}(n.Component),I=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement(b.a,null,r.a.createElement(f.a,{exact:!0,path:"/",component:k}),r.a.createElement(f.a,{exact:!0,path:"/add",component:w}))))}}]),t}(n.Component),L=(a(364),{}),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;switch((arguments.length>1?arguments[1]:void 0).type){case"ADD_LOG":return console.log("add log"),e;case"ADD_LOG_ERROR":return console.log("add log error"),e;default:return e}},R={},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;arguments.length>1&&arguments[1];return e},V=a(52),_=Object(O.c)({auth:T,log:q,firestore:V.firestoreReducer}),G=a(201),P=a(77),M=a.n(P),z=(a(398),a(403),{apiKey:"AIzaSyAQyQ2mkF6k5ToK-inOmaIwQVkwxCXFLDw",authDomain:"react-firebase-tutorial-3f678.firebaseapp.com",databaseURL:"https://react-firebase-tutorial-3f678.firebaseio.com",projectId:"react-firebase-tutorial-3f678",storageBucket:"react-firebase-tutorial-3f678.appspot.com",messagingSenderId:"256336111624"});M.a.initializeApp(z),M.a.firestore().settings({timestampsInSnapshots:!0});var B=M.a,J=Object(O.e)(_,Object(O.d)(Object(O.a)(G.a.withExtraArgument({getFirebase:y.getFirebase,getFirestore:V.getFirestore})),Object(y.reactReduxFirebase)(B),Object(V.reduxFirestore)(B)));o.a.render(r.a.createElement(E.a,{store:J},r.a.createElement(I,null)),document.getElementById("root"))}},[[202,2,1]]]);
//# sourceMappingURL=main.79fcdd1e.chunk.js.map