(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t,a){e.exports=a(407)},407:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(123),o=a.n(c),l=a(21),i=a(22),s=a(24),u=a(23),m=a(25),d=a(409),b=a(411),f=a(410),h=a(4);function p(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,"kCal")),r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,e.logs.reduce(function(e,t){return e+t.kcal},0).toFixed(2)))),r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,"Protein")),r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,e.logs.reduce(function(e,t){return e+t.protein},0).toFixed(2)))),r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,"Carb")),r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,e.logs.reduce(function(e,t){return e+t.carb},0).toFixed(2)))),r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,"Fat")),r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,e.logs.reduce(function(e,t){return e+t.fat},0).toFixed(2)))))}function g(e){return r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("tbody",null,e.logs.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement("tr",null,r.a.createElement("td",{rowSpan:2},t+1),r.a.createElement("td",{colSpan:4},e.food)),r.a.createElement("tr",null,r.a.createElement("td",null,"kCal: ",e.kcal.toFixed(2)),r.a.createElement("td",null,"Protein: ",e.protein.toFixed(2)),r.a.createElement("td",null,"Carb: ",e.carb.toFixed(2)),r.a.createElement("td",null,"Fat: ",e.fat.toFixed(2))))})))}var v=a(38),E=a(51),O=a(16),j=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(s.a)(this,Object(u.a)(t).call(this,e));var n=(new Date).toISOString().substr(0,10);return a.state={date:n},a.onDateChange=a.onDateChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onDateChange",value:function(e){this.setState({date:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.logList,a=r.a.createElement("div",null),n=r.a.createElement("div",null);if(t){var c=t.reduce(function(t,a){return a.date===e.state.date&&t.push(a),t},[]);a=r.a.createElement(g,{logs:c}),n=r.a.createElement(p,{logs:c})}return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Date:"),r.a.createElement("input",{type:"date",id:"date",className:"form-control",defaultValue:this.state.date,onChange:this.onDateChange})),n,a)}}]),t}(n.Component);var y=Object(O.d)(Object(v.b)(function(e){return{logList:e.firestore.ordered.logs}}),Object(E.firestoreConnect)([{collection:"logs"}]))(j),N=a(199),k=a(408),C=a(200),F=a.n(C),D="OR1fFxCjbxhOg23jsmClJFrwjzATy596EbjAjtKR",S=a(201),x=a.n(S),w=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){var t=Object(h.a)(Object(h.a)(a)),n="quantity"===e.target.id;t.setState(Object(N.a)({},e.target.id,e.target.value),function(){n&&0!==Object.keys(t.state.foodMacros).length&&t.calculateTotals()})},a.onAutocompleteChange=function(e){var t=Object(h.a)(Object(h.a)(a));t.setState({foodName:e.target.value},function(){t.getFoodData()})},a.onSubmit=function(e){e.preventDefault(),a.props.addLog({date:a.state.date,food:a.state.foodName,quantity:a.state.quantity,kcal:a.state.kcal,protein:a.state.protein,carb:a.state.carb,fat:a.state.fat}),a.props.history.push("/")};var n=(new Date).toISOString().substr(0,10);return a.state={date:n,foodName:"",foodMacros:{},autocompleteData:[],quantity:100,kcal:0,protein:0,carb:0,fat:0},a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.onAutocompleteChange=a.onAutocompleteChange.bind(Object(h.a)(Object(h.a)(a))),a.onSubmit=a.onSubmit.bind(Object(h.a)(Object(h.a)(a))),a.onSelect=a.onSelect.bind(Object(h.a)(Object(h.a)(a))),a.getItemValue=a.getItemValue.bind(Object(h.a)(Object(h.a)(a))),a.renderItem=a.renderItem.bind(Object(h.a)(Object(h.a)(a))),a.getFoodData=x()(a.getFoodData.bind(Object(h.a)(Object(h.a)(a))),500),a.calculateTotals=a.calculateTotals.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getFoodData",value:function(){var e=this,t="https://api.nal.usda.gov/ndb/search/?format=json&q=".concat(encodeURIComponent(e.state.foodName),"&max=25&offset=0&api_key=").concat(D);fetch(t).then(function(e){return e.json()}).then(function(t){void 0!==t.list&&e.setState({autocompleteData:t.list.item})})}},{key:"onSelect",value:function(e){var t=this;fetch("https://api.nal.usda.gov/ndb/V2/reports?ndbno=".concat(e,"&type=f&format=json&api_key=").concat(D)).then(function(e){return e.json()}).then(function(e){var a=e.foods[0].food.nutrients.reduce(function(e,t){return"Energy"===t.name&&"kcal"===t.unit&&(e.kcal=Number(t.value)),"Protein"===t.name&&(e.protein=Number(t.value)),"Total lipid (fat)"===t.name&&(e.fat=Number(t.value)),"Carbohydrate, by difference"===t.name&&(e.carb=Number(t.value)),e},{});t.setState({foodName:e.foods[0].food.desc.name,foodMacros:a},function(){t.calculateTotals()})})}},{key:"renderItem",value:function(e){return r.a.createElement("div",{key:e.ndbno,className:"list-group-item"},e.name)}},{key:"getItemValue",value:function(e){return e.ndbno}},{key:"calculateTotals",value:function(){var e=this.state.quantity/100,t=this.state.foodMacros;this.setState({kcal:e*t.kcal,protein:e*t.protein,carb:e*t.carb,fat:e*t.fat})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},"Date:"),r.a.createElement("input",{type:"date",id:"date",className:"form-control",value:this.state.date,onChange:this.onChange})),r.a.createElement(p,{logs:[{kcal:this.state.kcal,protein:this.state.protein,carb:this.state.carb,fat:this.state.fat}]}),r.a.createElement("label",{htmlFor:"food"},"Food:"),r.a.createElement(F.a,{id:"food",getItemValue:this.getItemValue,items:this.state.autocompleteData,renderItem:this.renderItem,value:this.state.foodName,onChange:this.onAutocompleteChange,onSelect:this.onSelect,wrapperProps:{className:"form-group",style:{}},inputProps:{className:"form-control",placeholder:"Search for food"}}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity"},"Grams:"),r.a.createElement("input",{id:"quantity",name:"quantity",type:"number",className:"form-control",defaultValue:100,onChange:this.onChange})),r.a.createElement("input",{type:"hidden",name:"kcal",id:"kcal",value:this.state.kcal}),r.a.createElement("input",{type:"hidden",name:"protein",id:"protein",value:this.state.protein}),r.a.createElement("input",{type:"hidden",name:"carb",id:"carb",value:this.state.carb}),r.a.createElement("input",{type:"hidden",name:"fat",id:"fat",value:this.state.fat}),r.a.createElement("button",{className:"btn btn-secondary"},"Add Log"),r.a.createElement(k.a,{to:"/",className:"btn"},"Cancel")))}}]),t}(n.Component),I=Object(v.b)(null,function(e){return{addLog:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("logs").add({date:e.date,food:e.food,quantity:e.quantity,kcal:e.kcal,protein:e.protein,carb:e.carb,fat:e.fat}).then(function(){t({type:"ADD_LOG",log:e})}).catch(function(e){t({type:"ADD_LOG_ERROR",err:e})})}}(t))}}})(w),A=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg sticky-top navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement(k.a,{to:"/",className:"navbar-brand"},"Nutrient Log"),r.a.createElement("div",{className:"navbar-nav text-right"},r.a.createElement("div",{className:"nav-item"},r.a.createElement(k.a,{to:"/add",className:"btn btn-secondary btn-sm"},"Add Log")))))}}]),t}(n.Component),L=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement(b.a,null,r.a.createElement(f.a,{exact:!0,path:"/",component:y}),r.a.createElement(f.a,{exact:!0,path:"/add",component:I}))))}}]),t}(n.Component),R=(a(366),{}),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;switch((arguments.length>1?arguments[1]:void 0).type){case"ADD_LOG":return console.log("add log"),e;case"ADD_LOG_ERROR":return console.log("add log error"),e;default:return e}},V={},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;arguments.length>1&&arguments[1];return e},_=a(52),G=Object(O.c)({auth:T,log:q,firestore:_.firestoreReducer}),P=a(203),M=a(77),z=a.n(M),J=(a(400),a(405),{apiKey:"AIzaSyAQyQ2mkF6k5ToK-inOmaIwQVkwxCXFLDw",authDomain:"react-firebase-tutorial-3f678.firebaseapp.com",databaseURL:"https://react-firebase-tutorial-3f678.firebaseio.com",projectId:"react-firebase-tutorial-3f678",storageBucket:"react-firebase-tutorial-3f678.appspot.com",messagingSenderId:"256336111624"});z.a.initializeApp(J),z.a.firestore().settings({timestampsInSnapshots:!0});var K=z.a,Q=Object(O.e)(G,Object(O.d)(Object(O.a)(P.a.withExtraArgument({getFirebase:E.getFirebase,getFirestore:_.getFirestore})),Object(E.reactReduxFirebase)(K),Object(_.reduxFirestore)(K)));o.a.render(r.a.createElement(v.a,{store:Q},r.a.createElement(L,null)),document.getElementById("root"))}},[[204,2,1]]]);
//# sourceMappingURL=main.d5c7d6ab.chunk.js.map